<template>
    <header class="logo-header">
        <div class="logo-block">
        
            <div class="logo">{{logo}}</div>
                <div class="additionally">
                    <svg class="icon-profile" @click="toggleAditional" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="20.5" cy="20" r="20" fill="#EEEEEE"/>
                        <path d="M24.7785 20.0001C24.7785 22.5514 22.865 24.6155 20.5 24.6155C18.135 24.6155 16.2216 22.5514 16.2216 20.0001C16.2216 17.4489 18.135 15.3848 20.5 15.3848C22.865 15.3848 24.7785 17.4489 24.7785 20.0001ZM30.9584 15.3848C28.5934 15.3848 26.68 17.4489 26.68 20.0001C26.68 22.5514 28.5934 24.6155 30.9584 24.6155C33.3235 24.6155 35.2369 22.5514 35.2369 20.0001C35.2369 17.4489 33.3235 15.3848 30.9584 15.3848ZM10.0416 15.3848C7.6766 15.3848 5.76318 17.4489 5.76318 20.0001C5.76318 22.5514 7.6766 24.6155 10.0416 24.6155C12.4066 24.6155 14.3201 22.5514 14.3201 20.0001C14.3201 17.4489 12.4066 15.3848 10.0416 15.3848Z" fill="black"/>
                    </svg>

                    <div class="menu-additionally"  v-show="AdditionallyClick">
                        <div class="profile-block">
                            <div class="group_photo_login-email">
                                <div class="photo">
                                    <svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20.5 0C9.1754 0 0 9.1754 0 20.5C0 31.8246 9.1754 41 20.5 41C31.8246 41 41 31.8246 41 20.5C41 9.1754 31.8246 0 20.5 0ZM20.5 7.93548C24.5173 7.93548 27.7742 11.1923 27.7742 15.2097C27.7742 19.227 24.5173 22.4839 20.5 22.4839C16.4827 22.4839 13.2258 19.227 13.2258 15.2097C13.2258 11.1923 16.4827 7.93548 20.5 7.93548ZM20.5 36.371C15.6478 36.371 11.2998 34.1722 8.39012 30.7335C9.94415 27.8073 12.9861 25.7903 16.5323 25.7903C16.7306 25.7903 16.929 25.8234 17.1192 25.8813C18.1938 26.2284 19.3179 26.4516 20.5 26.4516C21.6821 26.4516 22.8145 26.2284 23.8808 25.8813C24.071 25.8234 24.2694 25.7903 24.4677 25.7903C28.0139 25.7903 31.0558 27.8073 32.6099 30.7335C29.7002 34.1722 25.3522 36.371 20.5 36.371Z" fill="black"/>
                                    </svg>
                                </div>
                                <div class="group_login-email">
                                    <div class="login">{{ user.login }}</div>
                                    <div class="e-mail">{{ user.email }}</div>
                                </div>
                            </div>
                            <div class="profile-block-additionally">
                                <div class="router-profile">
                                    <svg width="141" height="25" viewBox="0 0 141 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="141" height="25" rx="5" fill="#D9D9D9"/>
                                    <path d="M28.2867 17.1193V15.7898H28.7853C29.0097 15.7898 29.1944 15.7571 29.3393 15.6918C29.4842 15.6264 29.6006 15.5327 29.6887 15.4105C29.7796 15.2884 29.8549 15.1463 29.9146 14.9844L30.0296 14.6903L26.9103 8.27273H28.5637L30.737 12.9432L32.6163 8.27273H34.2441L31.2356 15.3892C31.0964 15.696 30.9359 15.9815 30.7541 16.2457C30.5722 16.5071 30.335 16.7187 30.0424 16.8807C29.7526 17.0398 29.3748 17.1193 28.9089 17.1193H28.2867ZM36.6215 17V10.4545H42.1485V17H40.6613V11.7202H38.096V17H36.6215ZM45.5348 19.4545V10.4545H47.0518V11.5369H47.1413C47.2209 11.3778 47.3331 11.2088 47.478 11.0298C47.6229 10.848 47.8189 10.6932 48.0661 10.5653C48.3132 10.4347 48.6286 10.3693 49.0121 10.3693C49.5178 10.3693 49.9737 10.4986 50.38 10.7571C50.7891 11.0128 51.1129 11.392 51.3516 11.8949C51.593 12.3949 51.7138 13.0085 51.7138 13.7358C51.7138 14.4545 51.5959 15.0653 51.3601 15.5682C51.1243 16.071 50.8033 16.4545 50.397 16.7188C49.9908 16.983 49.5305 17.1151 49.0163 17.1151C48.6413 17.1151 48.3303 17.0526 48.0831 16.9276C47.8359 16.8026 47.6371 16.652 47.4865 16.4759C47.3388 16.2969 47.2237 16.1278 47.1413 15.9688H47.0774V19.4545H45.5348ZM47.0476 13.7273C47.0476 14.1506 47.1072 14.5213 47.2266 14.8395C47.3487 15.1577 47.5234 15.4062 47.7507 15.5852C47.9808 15.7614 48.2592 15.8494 48.5859 15.8494C48.9268 15.8494 49.2124 15.7585 49.4425 15.5767C49.6726 15.392 49.8459 15.1406 49.9624 14.8224C50.0817 14.5014 50.1413 14.1364 50.1413 13.7273C50.1413 13.321 50.0831 12.9602 49.9666 12.6449C49.8501 12.3295 49.6768 12.0824 49.4467 11.9034C49.2166 11.7244 48.9297 11.6349 48.5859 11.6349C48.2564 11.6349 47.9766 11.7216 47.7465 11.8949C47.5163 12.0682 47.3416 12.3111 47.2223 12.6236C47.1058 12.9361 47.0476 13.304 47.0476 13.7273ZM56.7183 17.1321C56.3036 17.1321 55.93 17.0582 55.5976 16.9105C55.268 16.7599 55.0067 16.5384 54.8135 16.2457C54.6232 15.9531 54.528 15.5923 54.528 15.1634C54.528 14.794 54.5962 14.4886 54.7325 14.2472C54.8689 14.0057 55.055 13.8125 55.2908 13.6676C55.5266 13.5227 55.7922 13.4134 56.0876 13.3395C56.3859 13.2628 56.6942 13.2074 57.0124 13.1733C57.3959 13.1335 57.707 13.098 57.9456 13.0668C58.1842 13.0327 58.3575 12.9815 58.4655 12.9134C58.5763 12.8423 58.6317 12.733 58.6317 12.5852V12.5597C58.6317 12.2386 58.5365 11.9901 58.3462 11.8139C58.1558 11.6378 57.8817 11.5497 57.5237 11.5497C57.1459 11.5497 56.8462 11.6321 56.6246 11.7969C56.4058 11.9616 56.2581 12.1562 56.1814 12.3807L54.7411 12.1761C54.8547 11.7784 55.0422 11.446 55.3036 11.179C55.5649 10.9091 55.8845 10.7074 56.2624 10.5739C56.6402 10.4375 57.0578 10.3693 57.5152 10.3693C57.8305 10.3693 58.1445 10.4062 58.457 10.4801C58.7695 10.554 59.055 10.6761 59.3135 10.8466C59.572 11.0142 59.7794 11.2429 59.9357 11.5327C60.0947 11.8224 60.1743 12.1847 60.1743 12.6193V17H58.6913V16.1009H58.6402C58.5465 16.2827 58.4143 16.4531 58.2439 16.6122C58.0763 16.7685 57.8646 16.8949 57.609 16.9915C57.3561 17.0852 57.0592 17.1321 56.7183 17.1321ZM57.1189 15.9986C57.4286 15.9986 57.697 15.9375 57.9243 15.8153C58.1516 15.6903 58.3263 15.5256 58.4484 15.321C58.5734 15.1165 58.6359 14.8935 58.6359 14.652V13.8807C58.5876 13.9205 58.5053 13.9574 58.3888 13.9915C58.2751 14.0256 58.1473 14.0554 58.0053 14.081C57.8632 14.1065 57.7226 14.1293 57.5834 14.1491C57.4442 14.169 57.3234 14.1861 57.2212 14.2003C56.9911 14.2315 56.7851 14.2827 56.6033 14.3537C56.4215 14.4247 56.278 14.5241 56.1729 14.652C56.0678 14.777 56.0152 14.9389 56.0152 15.1378C56.0152 15.4219 56.1189 15.6364 56.3263 15.7812C56.5337 15.9261 56.7979 15.9986 57.1189 15.9986ZM63.5254 17V10.4545H66.274C67.0496 10.4545 67.6618 10.6094 68.1107 10.919C68.5624 11.2287 68.7882 11.6605 68.7882 12.2145C68.7882 12.581 68.6604 12.8807 68.4047 13.1136C68.1518 13.3437 67.8067 13.4986 67.3692 13.5781C67.7129 13.6065 68.0141 13.6932 68.2726 13.8381C68.534 13.983 68.7385 14.1733 68.8862 14.4091C69.034 14.6449 69.1078 14.9162 69.1078 15.223C69.1078 15.5838 69.0126 15.8977 68.8223 16.1648C68.6348 16.429 68.3607 16.6349 67.9999 16.7827C67.6419 16.9276 67.2072 17 66.6959 17H63.5254ZM64.97 15.7855H66.6959C66.98 15.7855 67.203 15.7187 67.3649 15.5852C67.5268 15.4489 67.6078 15.2642 67.6078 15.0312C67.6078 14.7614 67.5268 14.5497 67.3649 14.3963C67.203 14.2401 66.98 14.1619 66.6959 14.1619H64.97V15.7855ZM64.97 13.1648H66.3038C66.5141 13.1648 66.6945 13.1349 66.845 13.0753C66.9956 13.0128 67.1107 12.9261 67.1902 12.8153C67.2697 12.7017 67.3095 12.5668 67.3095 12.4105C67.3095 12.1861 67.2172 12.0099 67.0325 11.8821C66.8507 11.7543 66.5979 11.6903 66.274 11.6903H64.97V13.1648ZM71.7292 17L71.7207 15.7301H71.9465C72.117 15.7301 72.2604 15.6918 72.3769 15.6151C72.4934 15.5384 72.59 15.4105 72.6667 15.2315C72.7434 15.0497 72.8031 14.8054 72.8457 14.4986C72.8883 14.1918 72.9181 13.8097 72.9352 13.3523L73.0502 10.4545H77.8229V17H76.3315V11.7202H74.4522L74.3499 13.8295C74.3244 14.375 74.2633 14.848 74.1667 15.2486C74.0729 15.6463 73.9394 15.9744 73.7661 16.233C73.5957 16.4915 73.3812 16.6847 73.1227 16.8125C72.8641 16.9375 72.5587 17 72.2065 17H71.7292ZM84.0739 17.1278C83.4177 17.1278 82.8509 16.9915 82.3737 16.7188C81.8992 16.4432 81.5342 16.054 81.2785 15.5511C81.0228 15.0455 80.895 14.4503 80.895 13.7656C80.895 13.0923 81.0228 12.5014 81.2785 11.9929C81.537 11.4815 81.8978 11.0838 82.3609 10.7997C82.8239 10.5128 83.368 10.3693 83.993 10.3693C84.3964 10.3693 84.7771 10.4347 85.135 10.5653C85.4958 10.6932 85.814 10.892 86.0896 11.1619C86.368 11.4318 86.5867 11.7756 86.7458 12.1932C86.9049 12.608 86.9844 13.1023 86.9844 13.6761V14.1491H81.6194V13.1094H85.5058C85.5029 12.8139 85.439 12.5511 85.314 12.321C85.189 12.0881 85.0143 11.9048 84.7898 11.7713C84.5683 11.6378 84.3097 11.571 84.0143 11.571C83.6989 11.571 83.4219 11.6477 83.1833 11.8011C82.9447 11.9517 82.7586 12.1506 82.6251 12.3977C82.4944 12.642 82.4276 12.9105 82.4248 13.2031V14.1108C82.4248 14.4915 82.4944 14.8182 82.6336 15.0909C82.7728 15.3608 82.9674 15.5682 83.2174 15.7131C83.4674 15.8551 83.76 15.9261 84.0952 15.9261C84.3197 15.9261 84.5228 15.8949 84.7046 15.8324C84.8864 15.767 85.0441 15.6719 85.1776 15.5469C85.3112 15.4219 85.412 15.267 85.4802 15.0824L86.9205 15.2443C86.8296 15.625 86.6563 15.9574 86.4006 16.2415C86.1478 16.5227 85.8239 16.7415 85.429 16.8977C85.0342 17.0511 84.5825 17.1278 84.0739 17.1278ZM94.5852 13.0881V14.3537H91.0994V13.0881H94.5852ZM91.5767 10.4545V17H90.0895V10.4545H91.5767ZM95.5952 10.4545V17H94.1122V10.4545H95.5952ZM100.443 14.9119L103.064 10.4545H104.649V17H103.158V12.5384L100.545 17H98.9559V10.4545H100.443V14.9119ZM110.931 17.1278C110.275 17.1278 109.708 16.9915 109.231 16.7188C108.756 16.4432 108.391 16.054 108.136 15.5511C107.88 15.0455 107.752 14.4503 107.752 13.7656C107.752 13.0923 107.88 12.5014 108.136 11.9929C108.394 11.4815 108.755 11.0838 109.218 10.7997C109.681 10.5128 110.225 10.3693 110.85 10.3693C111.253 10.3693 111.634 10.4347 111.992 10.5653C112.353 10.6932 112.671 10.892 112.947 11.1619C113.225 11.4318 113.444 11.7756 113.603 12.1932C113.762 12.608 113.841 13.1023 113.841 13.6761V14.1491H108.476V13.1094H112.363C112.36 12.8139 112.296 12.5511 112.171 12.321C112.046 12.0881 111.871 11.9048 111.647 11.7713C111.425 11.6378 111.167 11.571 110.871 11.571C110.556 11.571 110.279 11.6477 110.04 11.8011C109.802 11.9517 109.616 12.1506 109.482 12.3977C109.351 12.642 109.285 12.9105 109.282 13.2031V14.1108C109.282 14.4915 109.351 14.8182 109.491 15.0909C109.63 15.3608 109.824 15.5682 110.074 15.7131C110.324 15.8551 110.617 15.9261 110.952 15.9261C111.177 15.9261 111.38 15.8949 111.562 15.8324C111.743 15.767 111.901 15.6719 112.035 15.5469C112.168 15.4219 112.269 15.267 112.337 15.0824L113.778 15.2443C113.687 15.625 113.513 15.9574 113.258 16.2415C113.005 16.5227 112.681 16.7415 112.286 16.8977C111.891 17.0511 111.439 17.1278 110.931 17.1278Z" fill="black"/>
                                    </svg>
                                </div>
                            </div>
                            
                        </div>
                        <div class="buttons-additionally">
                            <div class="button-exit" @click="logout">
                                <svg class = "button-exit-svg" width="90" height="25" viewBox="0 0 90 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect width="90" height="25" rx="5" fill="#F9F8F8"/>
                                <path d="M22.65 15.625H20.9V8.43739C20.9 7.85172 20.429 7.37498 19.85 7.37498H17.4V8.74998H19.5V17H22.65C22.8434 17 23 16.8462 23 16.6562V15.9687C23 15.7788 22.8434 15.625 22.65 15.625ZM15.8302 6.02168L11.6302 7.09031C11.3185 7.16959 11.1 7.45447 11.1 7.78147V15.625H9.35C9.15662 15.625 9 15.7788 9 15.9687V16.6562C9 16.8462 9.15662 17 9.35 17H16.7V6.71283C16.7 6.2492 16.2721 5.9091 15.8302 6.02168ZM14.775 12.1875C14.4852 12.1875 14.25 11.8796 14.25 11.5C14.25 11.1204 14.4852 10.8125 14.775 10.8125C15.0648 10.8125 15.3 11.1204 15.3 11.5C15.3 11.8796 15.0648 12.1875 14.775 12.1875Z" fill="#4A4A4A"/>
                                <path d="M34.3559 16V8.72727H36.8985C37.4051 8.72727 37.823 8.81487 38.152 8.99006C38.4811 9.16288 38.7261 9.39607 38.8871 9.68963C39.0481 9.98082 39.1286 10.304 39.1286 10.6591C39.1286 10.9716 39.073 11.2296 38.9617 11.4332C38.8528 11.6368 38.7084 11.7978 38.5285 11.9162C38.3509 12.0346 38.158 12.1222 37.9496 12.179V12.25C38.1722 12.2642 38.3959 12.3423 38.6208 12.4844C38.8457 12.6264 39.0339 12.83 39.1854 13.0952C39.3369 13.3603 39.4127 13.6847 39.4127 14.0682C39.4127 14.4328 39.3298 14.7607 39.1641 15.0518C38.9984 15.343 38.7368 15.5739 38.3793 15.7443C38.0218 15.9148 37.5566 16 36.9837 16H34.3559ZM35.2366 15.2188H36.9837C37.559 15.2188 37.9674 15.1075 38.2089 14.8849C38.4527 14.66 38.5746 14.3878 38.5746 14.0682C38.5746 13.822 38.5119 13.5947 38.3864 13.3864C38.2609 13.1757 38.0822 13.0076 37.8502 12.8821C37.6182 12.7543 37.3436 12.6903 37.0263 12.6903H35.2366V15.2188ZM35.2366 11.9233H36.8701C37.1352 11.9233 37.3743 11.8712 37.5874 11.767C37.8028 11.6629 37.9733 11.5161 38.0988 11.3267C38.2266 11.1373 38.2905 10.9148 38.2905 10.6591C38.2905 10.3395 38.1793 10.0684 37.9567 9.84588C37.7342 9.62098 37.3814 9.50852 36.8985 9.50852H35.2366V11.9233ZM42.5206 12.5199H44.0831C44.7223 12.5199 45.2112 12.6821 45.5497 13.0064C45.8882 13.3307 46.0575 13.7415 46.0575 14.2386C46.0575 14.5653 45.9818 14.8625 45.8302 15.13C45.6787 15.3951 45.4562 15.607 45.1626 15.7656C44.8691 15.9219 44.5092 16 44.0831 16H41.7961V10.5455H42.6342V15.2188H44.0831C44.4145 15.2188 44.6868 15.1312 44.8998 14.956C45.1129 14.7808 45.2194 14.5559 45.2194 14.2812C45.2194 13.9924 45.1129 13.7569 44.8998 13.5746C44.6868 13.3923 44.4145 13.3011 44.0831 13.3011H42.5206V12.5199ZM46.924 16V10.5455H47.7621V16H46.924ZM51.1842 14.7642L53.8121 10.5455H54.778V16H53.9399V11.7812L51.3263 16H50.3461V10.5455H51.1842V14.7642ZM53.2581 8.72727H54.0393C54.0393 9.1108 53.9068 9.42448 53.6416 9.66832C53.3765 9.91217 53.0166 10.0341 52.5621 10.0341C52.1146 10.0341 51.7583 9.91217 51.4932 9.66832C51.2304 9.42448 51.099 9.1108 51.099 8.72727H51.8802C51.8802 8.91193 51.9311 9.0741 52.0329 9.21378C52.1371 9.35346 52.3135 9.4233 52.5621 9.4233C52.8106 9.4233 52.9882 9.35346 53.0947 9.21378C53.2036 9.0741 53.2581 8.91193 53.2581 8.72727ZM56.6208 11.3267V10.5455H61.0526V11.3267H59.2628V16H58.4247V11.3267H56.6208ZM64.1631 14.7642L66.791 10.5455H67.7569V16H66.9188V11.7812L64.3052 16H63.3251V10.5455H64.1631V14.7642Z" fill="black"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </header>
</template>

<script>
import { request } from '../../../api.js'

export default {
    name: 'MainHeader',
    data(){
        return{
            TransitionClick: false,
            SearchButtonClick: false,
            AdditionallyClick: false,
            user:''
        }
    },
    computed: {
        isSearchVisible() {
            return this.$router.currentRoute.meta.isSearchVisible
        },
        logo() {
            return this.$router.currentRoute.meta.logo
        }
    },

    async mounted(){
        await this.getUser()
    },

    methods: {
        async getUser(){
            const result = await request('user')
            let result_json = await result.json()
            this.user = result_json[0]
        },

        logout() {
            request('auth/logout', { method: 'DELETE'})
            location.reload()
        },

        toggleAditional(){
            this.AdditionallyClick=!this.AdditionallyClick
        }
    },

}
</script>

<style scoped>

    
    .logo-header{
        display: flex;
        height: 95px;
        justify-content: center;
        align-content: center;
        flex-wrap: wrap;
    }
    .logo-block{
        position: relative;
        display: flex;
        align-items: center;
        justify-content: space-between;

        width: 1425px;
        height: 55px;
        border-radius: 15px;

        background-color: rgba(238, 238, 238, 1);
        }
    .logo{
        display: flex;
        align-items: center;
        justify-content: center;
        
        width: 185px;
        height: 45px;
        border-width: 0;
        border-style: solid;
        border-radius: 15px;

        font-family: 'Roboto', sans-serif;
        font-size: 28px;
        font-weight: 900;
        letter-spacing: 0.1em;
        line-height: 15px;
    }
    .additionally{
        display: flex;
        margin-right: 15px;
        padding: 0;
        border: 0;
        cursor: pointer;
    }

    .icon-profile:hover > circle{
        fill: rgba(215, 215, 215, 1);
        transition: all 300ms ease
    }
 
    .search{
        width: 230px;
        height: 30px;
        background: #ffffff;
        border-radius: 5px;

        outline: none;
        border-width: 0;
    }
    .search-wrapper-button{
        display: flex;
        background: none;
        border-width: 0;
        outline: none;
    }

    .menu-additionally{
        position: absolute;
        display: flex;
        flex-direction: column;
        width: 400px;
        height: 200px;
        border-radius: 10px;
        z-index: 10;

        top: 60px;
        right: 0;
        background-color: rgba(225, 225, 225, 1);
    }

    .profile-block {
        display: flex;
        flex-direction: column;
        width: auto;
        height: 150px;
        border-radius: 10px 10px 0 0;
        background-color: rgba(247, 247, 247, 1);
        cursor: default;
    }

    .group_photo_login-email {
        display: flex;
        align-items: center;
        width: 400px;
        height: 65px;
        margin: 25px 0 0 25px
    }
    .photo {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 65px;
        height: 65px;
        border-radius: 50%;
        background-color: rgba(217, 217, 217, 1);
    }

    .group_login-email {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        width: 285px;
        height: 40px;
        margin: 0 0 0 12px;
    }

    .login {
        display: flex;
        align-items: center;
        width: 285px;
        height: 25px;

    }
    
    .e-mail {
        display: flex;
        align-items: center;
        width: 285px;
        height: 15px;
        font-size: 12px
    }
    .profile-block-additionally {
        display: flex;
        width: 400px;
        height: 60px;
        margin: 0 0 0 102px;
    }

    .buttons-additionally {
        display: flex;
        flex-direction: row-reverse;
    }
    .button-exit {
        display: flex;
        margin: 12px 12px 0 0;
        cursor: pointer;
    }

    .button-exit > svg {
        cursor: pointer;
    }

    .button-exit:hover > svg > rect {
        fill: rgb(150, 182, 188);
        transition: all 300ms ease
    }

</style>
